<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸŒ¿ Plant Care Deluxe</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --bg:#f0f5f3;
  --card:rgba(255,255,255,0.9);
  --accent:#4caf87;
  --accent-soft:#d7efe7;
  --text:#2b3a33;
  --warning:#e6a23c;
  --danger:#e94f4f;
  --shadow:rgba(0,0,0,0.08);
}
*{box-sizing:border-box;font-family:'Montserrat',sans-serif;}
body{margin:0;background:var(--bg);color:var(--text);padding:1rem;overflow-x:hidden;position:relative;}
h1{text-align:center;font-weight:700;margin-bottom:1rem;font-size:1.8rem;letter-spacing:0.5px;color:var(--accent);text-shadow:0 1px 2px rgba(0,0,0,0.1);}
.top{background:var(--card);border-radius:20px;padding:1.5rem;margin-bottom:1rem;box-shadow:0 10px 25px var(--shadow);text-align:center;backdrop-filter:blur(8px);position:relative;}
.ring{width:140px;height:140px;border-radius:50%;background:conic-gradient(var(--accent) calc(var(--p)*1%),#e0e0e0 0);display:flex;align-items:center;justify-content:center;margin:auto;transition:background 0.6s ease;}
.ring span{background:var(--card);width:100px;height:100px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.3rem;box-shadow:0 5px 15px var(--shadow);}
form, .plant{background:var(--card);padding:1rem;border-radius:20px;margin-bottom:1rem;box-shadow:0 8px 20px var(--shadow);backdrop-filter:blur(5px);transition:transform 0.2s ease;position:relative;}
form:hover, .plant:hover{transform:translateY(-3px);}
input,textarea,select,button{width:100%;margin-bottom:0.6rem;padding:0.8rem;border-radius:14px;border:1px solid #ccc;font-size:1rem;}
button{background:var(--accent);color:#fff;font-weight:600;border:none;cursor:pointer;transition:all 0.25s;}
button:hover{background:#3e8c70;transform:scale(1.03);}
.plants{display:grid;gap:1rem;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));position:relative;}
.plant img{width:100%;border-radius:16px;margin-bottom:0.5rem;object-fit:cover;box-shadow:0 5px 15px var(--shadow);}
.status.soon{color:var(--warning);font-weight:600;}
.status.overdue{color:var(--danger);font-weight:600;}
.actions{display:flex;gap:0.5rem;margin-top:0.5rem;}
.actions button.primary{flex:1;background:var(--accent);color:#fff;}
.actions button.primary:hover{background:#3e8c70;transform:scale(1.05);}
textarea{min-height:70px;resize:vertical;padding:0.6rem;border-radius:14px;border:1px solid #ccc;background:rgba(255,255,255,0.7);backdrop-filter:blur(4px);}
.toast{position:fixed;bottom:25px;left:50%;transform:translateX(-50%) translateY(20px);background:rgba(255,255,255,0.95);padding:1rem 1.5rem;border-radius:999px;box-shadow:0 10px 30px rgba(0,0,0,0.15);opacity:0;pointer-events:none;transition:opacity 0.5s, transform 0.3s;backdrop-filter:blur(8px);z-index:1000;text-align:center;font-weight:600;}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0);}
.particle{position:absolute;width:8px;height:8px;background:var(--accent);border-radius:50%;opacity:0.8;animation:float linear infinite;}
@keyframes float{0%{transform:translateY(0) rotate(0deg);}100%{transform:translateY(-120px) rotate(360deg);opacity:0;}}
@keyframes confetti{0%{transform:translateY(0) rotate(0deg);}100%{transform:translateY(200px) rotate(360deg);opacity:0;}}
.confetti-piece{position:absolute;width:6px;height:12px;background:#ffcb77;opacity:0.8;animation:confetti 1s linear forwards;}
</style>
</head>
<body>

<h1>ðŸŒ¿ Plant Care Deluxe</h1>

<div class="top">
  <div class="ring" id="ring" style="--p:0"><span id="score">â€”</span></div>
  <p id="ringText" style="margin-top:.5rem;font-weight:600;"></p>
</div>

<form id="plantForm">
  <input required placeholder="Plant name" id="name">
  <input type="date" required id="planted">
  <input type="number" required placeholder="Water every X days" id="interval">
  <input type="file" accept="image/*" id="image">
  <button>Add Plant</button>
</form>

<select id="sort">
  <option value="due">Sort: Needs water</option>
  <option value="name">Sort: Name</option>
</select>

<div class="plants" id="plants"></div>
<div class="toast" id="toast"></div>

<script>
let plants=JSON.parse(localStorage.getItem("plants")||"[]");
let log=JSON.parse(localStorage.getItem("log")||"[]");
let lastMsg=localStorage.getItem("lastMsg")||"";

const general=[
"Small care adds up ðŸŒ±","Youâ€™re showing up","Growth takes patience","That plant felt that",
"Youâ€™re doing something right","Consistency beats perfection","Quiet progress counts",
"Plants thrive with gentle care","One step at a time","Youâ€™re building something good"
];
const ryan=[
"Youâ€™re doing great! Proud of you! â€” From Ryan",
"Probably thinking about you right now â€” From Ryan",
"Iâ€™m glad youâ€™re taking care of your plants as well as you take care of me! â€” From Ryan",
"Youâ€™re cute today â€” From Ryan","Look at dat butt! â€” From Ryan",
"I might be distracted right now, but Iâ€™m still thinking about you â€” From Ryan",
"This is your reminder that we need ice cream â€” From Ryan","How you doin? â€” From Ryan",
"Go on. GIT â€” From Ryan","You complete me â€” From Ryan"
];

function save(){localStorage.setItem("plants",JSON.stringify(plants));localStorage.setItem("log",JSON.stringify(log));}
function days(a,b){return Math.floor((b-a)/86400000);}
function maybeMessage(){
  const today=new Date().toDateString();
  if(lastMsg===today) return;
  lastMsg=today;
  localStorage.setItem("lastMsg",today);
  const pool=Math.random()<0.2?ryan:general;
  const msg=pool[Math.floor(Math.random()*pool.length)];
  const t=document.getElementById("toast");
  t.textContent=msg;t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),3500);
  createConfetti();
}
function score(){
  const cutoff=Date.now()-30*86400000;
  const recent=log.filter(l=>l.t>cutoff);
  if(!recent.length) return null;
  return Math.round(100*recent.filter(l=>l.ok).length/recent.length);
}
function renderScore(){
  const s=score();const ring=document.getElementById("ring");const txt=document.getElementById("ringText");
  if(s===null){document.getElementById("score").textContent="â€”";txt.textContent="Care consistency (last 30 days)";ring.style="--p:0";}
  else{document.getElementById("score").textContent=s+"%";ring.style=`--p:${s}`;txt.textContent=s>90?"Youâ€™re absolutely crushing it":s>70?"Youâ€™re doing really well":"Plants are forgiving ðŸŒ±";}
}
function water(i){
  const p=plants[i];const last=new Date(p.lastWatered);const due=days(last,new Date())<=p.interval+1;
  log.push({t:Date.now(),ok:due});
  p.lastWatered=new Date().toISOString();
  save();maybeMessage();render();animateWater(p);
}
function render(){
  renderScore();
  const list=document.getElementById("plants");
  list.innerHTML="";
  let sorted=[...plants];
  if(sort.value==="name") sorted.sort((a,b)=>a.name.localeCompare(b.name));
  else sorted.sort((a,b)=>{const da=days(new Date(a.lastWatered),new Date())-a.interval;const db=days(new Date(b.lastWatered),new Date())-b.interval;return db-da;});
  sorted.forEach((p,i)=>{
    const d=days(new Date(p.lastWatered),new Date());
    const due=p.interval-d;
    const s=due<0?"overdue":due<=1?"soon":"";
    list.innerHTML+=`
    <div class="plant">
      ${p.image?`<img src="${p.image}">`:""}
      <strong>${p.name}</strong>
      <div class="status ${s}">${due<0?`Overdue by ${-due} days`:due<=1?"Water soon":`Water in ${due} days`}</div>
      <textarea placeholder="Notesâ€¦" oninput="plants[${i}].notes=this.value;save()">${p.notes||""}</textarea>
      <div class="actions"><button class="primary" onclick="water(${i})">ðŸ’§ Watered today</button></div>
    </div>`;
  });
}
plantForm.onsubmit=async e=>{
  e.preventDefault();let img="";
  if(image.files[0]){img=await new Promise(r=>{const f=new FileReader();f.onload=()=>r(f.result);f.readAsDataURL(image.files[0]);});}
  plants.push({name:name.value,planted:planted.value,interval:+interval.value,lastWatered:new Date().toISOString(),image:img,notes:""});
  save();render();e.target.reset();
};
sort.onchange=render;
render();

// Fancy confetti & leaf animation
function createConfetti(){
  for(let i=0;i<15;i++){
    const c=document.createElement("div");
    c.className="confetti-piece";
    c.style.left=Math.random()*window.innerWidth+"px";
    c.style.background=["#ffcb77","#ff7f50","#ffd700","#90ee90"][Math.floor(Math.random()*4)];
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),1200+Math.random()*300);
  }
}
function animateWater(p){
  for(let i=0;i<10;i++){
    const leaf=document.createElement("div");
    leaf.className="particle";
    leaf.style.left=(window.innerWidth/2 + (Math.random()*80-40))+"px";
    leaf.style.bottom="50px";
    leaf.style.animationDuration=(1+Math.random())+"s";
    document.body.appendChild(leaf);
    setTimeout(()=>leaf.remove(),1500);
  }
}
</script>

</body>
</html>
